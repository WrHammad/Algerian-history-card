<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© - Algerian Revolution Cards Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Ø®Ø·ÙˆØ· Ù…Ø®ØµØµØ© ÙˆØ¨Ø¹Ø¶ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f4f7f6; /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© */
        }
        .card {
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 3px solid #10b981; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ø²Ù…Ø±Ø¯ÙŠ */
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .correct {
            background-color: #10b981 !important; /* Ø£Ø®Ø¶Ø± */
            color: white;
            border-color: #059669;
        }
        .incorrect {
            background-color: #ef4444 !important; /* Ø£Ø­Ù…Ø± */
            color: white;
            border-color: #dc2626;
        }
        .timer-ring {
            transition: stroke-dashoffset 1s linear;
        }
    </style>
    </head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    
    <div id="game-screen" class="w-full max-w-3xl bg-white shadow-2xl rounded-xl p-6 sm:p-8 hidden">
        <div class="relative">
            <header class="flex flex-col sm:flex-row justify-between items-center mb-6 pb-4 border-b">
                <h1 class="text-3xl font-bold text-gray-800">
                    Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©
                </h1>
                <div class="flex space-x-4 space-x-reverse mt-4 sm:mt-0">
                    <div class="text-center">
                        <p class="text-xl font-bold text-blue-600">Ø§Ù„Ù†Ù‚Ø§Ø·</p>
                        <span id="score" class="text-3xl font-extrabold text-blue-800">0</span>
                    </div>
                    <div class="text-center">
                        <p class="text-xl font-bold text-red-600">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</p>
                        <span id="attempts" class="text-3xl font-extrabold text-red-800">5</span>
                    </div>
                </div>
            </header>

            <div class="flex justify-center mb-6">
                <div class="relative w-20 h-20">
                    <svg viewBox="0 0 100 100" class="absolute inset-0">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#e5e7eb" stroke-width="10"/>
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#ef4444" stroke-width="10"
                                stroke-dasharray="283" stroke-dashoffset="283" class="timer-ring" id="timer-ring"/>
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <span id="timer-text" class="text-2xl font-bold text-red-600">30</span>
                    </div>
                </div>
            </div>
            
            <div class="text-center mb-8">
                <h2 class="text-2xl font-semibold text-gray-700 mb-3">Ø§Ù„Ø³Ø¤Ø§Ù„ <span id="question-number">1</span> Ù…Ù† 10</h2>
                <div id="event-card" class="bg-emerald-50 text-emerald-800 card p-4 sm:p-6 rounded-lg shadow-inner text-xl font-bold min-h-[100px] flex items-center justify-center">
                    </div>
            </div>

            <div id="detail-options" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                </div>
            
            <p id="message" class="text-center mt-6 text-xl font-semibold min-h-[30px]"></p>
            
            <div class="text-center mt-8">
                <button id="next-question-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300" style="display:none;">
                    Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
                </button>
            </div>
        </div>
    </div>

    <div id="start-screen" class="w-full max-w-xl bg-white shadow-2xl rounded-xl overflow-hidden border-t-8 border-green-600">
        <div class="py-4 bg-gray-50">
            <img src="https://th.bing.com/th/id/R.c1f9d2b2ed45becde0238bfe501dee31?rik=MozNFw%2b349wfrA&riu=http%3a%2f%2f3.bp.blogspot.com%2f-nNuZ7bviIS4%2fTem8jpa5mgI%2fAAAAAAAABMo%2fktle1kDCNjU%2fs1600%2fWallpapers%2bFlag%2bof%2bAlgeria%2bAlgerian%2bFlag%2bGraphics%2b%2525281%252529.png&ehk=sqOmCvXZ6sCboUp9rIluPrf5aubHQRWW0Vh324UxY4k%3d&risl=&pid=ImgRaw&r=0" 
                 alt="Ø¹Ù„Ù… Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±" 
                 class="w-20 h-auto mx-auto rounded-md shadow-md">
            <p class="text-center text-gray-700 font-semibold mt-2">Ù…Ù† Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒØ§ØªØ¨ Ø­Ù…Ø§Ø¯ Ø¨Ù† Ø¹ÙŠØ³Ù‰</p>
        </div>
        <div class="p-8 text-center">
            <h1 class="text-4xl font-extrabold text-green-700 mb-4">Ù„Ø¹Ø¨Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©</h1>
            <p class="text-gray-600 mb-6 text-lg">Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø¹Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±ÙŠØ© Ø§Ù„Ù…Ø¬ÙŠØ¯Ø©.</p>
            <h2 class="text-2xl font-bold text-red-600 mb-3">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨:</h2>
            <ul class="text-right list-disc list-inside space-y-2 text-gray-700 mb-8">
                <li>Ø§Ù„Ù„Ø¹Ø¨Ø© ØªØªÙƒÙˆÙ† Ù…Ù† **10 Ø£Ø³Ø¦Ù„Ø©** Ø­ÙˆÙ„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø«ÙˆØ±Ø©.</li>
                <li>ÙŠØ¸Ù‡Ø± Ù„Ùƒ **Ø­Ø¯Ø« Ø±Ø¦ÙŠØ³ÙŠ** ÙˆØ¹Ù„ÙŠÙƒ Ø§Ø®ØªÙŠØ§Ø± **Ø§Ù„ØªÙØµÙŠÙ„ Ø§Ù„ØµØ­ÙŠØ­** Ù„Ù‡ Ù…Ù† 3 Ø®ÙŠØ§Ø±Ø§Øª.</li>
                <li>Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©ØŒ ØªÙƒØ³Ø¨ **Ù†Ù‚Ø·Ø©**.</li>
                <li>Ù„Ø¯ÙŠÙƒ **5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª** ÙÙ‚Ø·. Ø³ØªØ®Ø³Ø± Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:
                    <ul class="list-circle list-inside mt-1 mr-4">
                        <li>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø© (Ø³ØªØ®Ø³Ø± **Ù†Ù‚Ø·Ø©** Ø£ÙŠØ¶Ø§Ù‹).</li>
                        <li>Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø²Ù…Ù†ÙŠ (**30 Ø«Ø§Ù†ÙŠØ©**).</li>
                    </ul>
                </li>
                <li>Ø§Ù„Ù‡Ø¯Ù Ù‡Ùˆ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‚Ø¨Ù„ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª.</li>
            </ul>
            <button id="start-game-btn" class="bg-green-600 hover:bg-green-700 text-white font-extrabold py-3 px-10 rounded-full shadow-xl transition duration-300 transform hover:scale-105">
                Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸš€
            </button>
        </div>
    </div>

    <div id="end-screen" class="w-full max-w-xl bg-white shadow-2xl rounded-xl overflow-hidden border-t-8 border-green-600 hidden">
        <div class="py-4 bg-gray-50">
            <img src="https://th.bing.com/th/id/R.c1f9d2b2ed45becde0238bfe501dee31?rik=MozNFw%2b349wfrA&riu=http%3a%2f%2f3.bp.blogspot.com%2f-nNuZ7bviIS4%2fTem8jpa5mgI%2fAAAAAAAABMo%2fktle1kDCNjU%2fs1600%2fWallpapers%2bFlag%2bof%2bAlgeria%2bAlgerian%2bFlag%2bGraphics%2b%2525281%252529.png&ehk=sqOmCvXZ6sCboUp9rIluPrf5aubHQRWW0Vh324UxY4k%3d&risl=&pid=ImgRaw&r=0" 
                 alt="Ø¹Ù„Ù… Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±" 
                 class="w-20 h-auto mx-auto rounded-md shadow-md">
            <p class="text-center text-gray-700 font-semibold mt-2">Ù…Ù† Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒØ§ØªØ¨ Ø­Ù…Ø§Ø¯ Ø¨Ù† Ø¹ÙŠØ³Ù‰</p>
        </div>
        <div class="p-8 text-center">
            <h1 class="text-4xl font-extrabold text-red-600 mb-4">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ›‘</h1>
            <p id="end-message" class="text-2xl font-semibold text-gray-700 mb-6"></p>
            <p class="text-xl font-bold text-blue-600 mb-4">Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:</p>
            <p class="text-5xl font-extrabold text-green-700 mb-8">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="final-score">0</span></p>
            <button id="restart-game-btn" class="bg-green-600 hover:bg-green-700 text-white font-extrabold py-3 px-10 rounded-full shadow-xl transition duration-300 transform hover:scale-105">
                Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ ğŸ”„
            </button>
        </div>
    </div>

    <footer class="mt-8 text-sm text-gray-500 absolute bottom-4">
    </footer>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø¹Ø¨Ø© (Ù…Ø³ØªØ®Ø±Ø¬Ø© Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ø£ØµÙ„ÙŠ)
        const GAME_DATA = [
            {
                event: "Ø§Ù†Ø¯Ù„Ø§Ø¹ Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±ÙŠØ© (Ø£ÙˆÙ„ Ù†ÙˆÙÙ…Ø¨Ø± 1954)",
                details: [
                    "ØªØ£Ø³ÙŠØ³ Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„Ø«ÙˆØ±ÙŠØ© Ù„Ù„ÙˆØ­Ø¯Ø© ÙˆØ§Ù„Ø¹Ù…Ù„ (CRUA) ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙØ§Ø­ Ø§Ù„Ù…Ø³Ù„Ø­.",
                    "ØªØ´ÙƒÙŠÙ„ 'Ù„Ø¬Ù†Ø© Ø§Ù„Ø³ØªØ©' Ø§Ù„Ù‚ÙŠØ§Ø¯ÙŠØ© ÙˆØªØ¹ÙŠÙŠÙ† Ù…Ø­Ù…Ø¯ Ø¨ÙˆØ¶ÙŠØ§Ù Ù…Ø³Ø¤ÙˆÙ„Ø§Ù‹ ÙˆØ·Ù†ÙŠØ§Ù‹.",
                    "ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø¥Ù„Ù‰ Ø³ØªØ© Ù…Ù†Ø§Ø·Ù‚ (ÙˆÙ„Ø§ÙŠØ§Øª) ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø§Ù…Ø±ÙƒØ²ÙŠØ©.",
                    "Ø¥Ø¹Ø¯Ø§Ø¯ 'Ø¨ÙŠØ§Ù† Ø£ÙˆÙ„ Ù†ÙˆÙÙ…Ø¨Ø± 1954' ÙˆØ¥Ø°Ø§Ø¹ØªÙ‡ Ø¹Ø¨Ø± 'ØµÙˆØª Ø§Ù„Ø¹Ø±Ø¨' Ù…Ù† Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©.",
                ]
            },
            {
                event: "Ù‡Ø¬ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ù…Ø§Ù„ Ø§Ù„Ù‚Ø³Ù†Ø·ÙŠÙ†ÙŠ (Ø£ÙˆØª 1955)",
                details: [
                    "Ù‚Ø§Ø¯ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø¯ÙŠØ¯ÙˆØ´ Ù…Ø±Ø§Ø¯ ÙˆØ®Ù„ÙÙ‡ Ø²ÙŠØºÙˆØ¯ ÙŠÙˆØ³Ù ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©.",
                    "Ù†ÙØ°Øª Ø³Ù„Ø³Ù„Ø© Ù…Ù† Ø§Ù„Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© Ù†Ù‡Ø§Ø±Ø§Ù‹ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙŠ Ù‚Ù„Ø¨ Ø§Ù„Ù…Ø¯Ù†.",
                    "Ø£Ø¯Øª Ø¥Ù„Ù‰ Ù†Ù‚Ù„ Ø§Ù„Ù‚Ø¶ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù…Ù… Ø§Ù„Ù…ØªØ­Ø¯Ø© ÙˆØªØ¯ÙˆÙŠÙ„Ù‡Ø§.",
                    "Ø£Ø«Ø¨ØªØª Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ø§Ù„Ø«ÙˆØ±Ø© ÙˆØªØ¬Ø§ÙˆØ²Ù‡Ø§ Ù„Ø£Ø²Ù…Ø© 1955 ÙˆÙƒØ³Ø± Ø­Ø§Ø¬Ø² Ø§Ù„Ø®ÙˆÙ.",
                ]
            },
            {
                event: "Ù…Ø¤ØªÙ…Ø± Ø§Ù„ØµÙˆÙ…Ø§Ù… (Ø£ÙˆØª 1956)",
                details: [
                    "Ø£ÙÙ‚Ø± Ù…Ø¨Ø¯Ø£ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø³ÙŠØ§Ø³ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ ÙˆÙ…Ø¨Ø¯Ø£ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©.",
                    "Ø¹ÙÙ‚Ø¯ Ø³Ø±Ø§Ù‹ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø¥ÙŠÙØ±ÙŠ (ÙˆØ§Ø¯ÙŠ Ø§Ù„ØµÙˆÙ…Ø§Ù…) ÙˆØ­Ø¶Ø±Ù‡ Ø§Ù„Ù‚Ø§Ø¯Ø© Ø§Ù„Ø³ØªØ© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠÙˆÙ†.",
                    "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø³ Ø§Ù„ÙˆØ·Ù†ÙŠ Ù„Ù„Ø«ÙˆØ±Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© (CNRA) ÙˆÙ„Ø¬Ù†Ø© Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙˆØ§Ù„ØªÙ†ÙÙŠØ° (CCE).",
                    "ØªÙ… ØªÙ‚Ù†ÙŠÙ† ÙˆØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ© ÙˆØªØ¨Ù†ÙŠ 'Ù„Ø§Ø¦Ø­Ø© Ø§Ù„ØµÙˆÙ…Ø§Ù…'.",
                ]
            },
            {
                event: "Ù…Ø¸Ø§Ù‡Ø±Ø§Øª 11 Ø¯ÙŠØ³Ù…Ø¨Ø± 1960",
                details: [
                    "Ø¬Ø§Ø¡Øª Ø¨Ø§Ù„ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„ÙØ±Ù†Ø³ÙŠ Ø¯ÙŠØºÙˆÙ„ Ù„Ù„Ø¬Ø²Ø§Ø¦Ø±.",
                    "Ø§Ù†Ø·Ù„Ù‚Øª Ù…Ù† Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ Ø§Ù„Ø´Ø¹Ø¨ÙŠØ© Ø¨Ø§Ù„Ø¹Ø§ØµÙ…Ø© ÙˆØªÙ… ÙÙŠÙ‡Ø§ Ø±ÙØ¹ Ø§Ù„Ø¹Ù„Ù… Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ ÙˆØ´Ø¹Ø§Ø± 'ØªØ­ÙŠØ§ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø­Ø±Ø©'.",
                    "Ø£Ø³ÙØ±Øª Ø¹Ù† ØªØºØ·ÙŠØ© Ø¥Ø¹Ù„Ø§Ù…ÙŠØ© Ø¯ÙˆÙ„ÙŠØ© ÙˆØ§Ø³Ø¹Ø© Ù„ÙˆØ­Ø´ÙŠØ© Ø§Ù„Ù‚Ù…Ø¹.",
                    "Ø£Ø«Ø¨ØªØª Ø£Ù† Ø¬Ø¨Ù‡Ø© Ø§Ù„ØªØ­Ø±ÙŠØ± Ø§Ù„ÙˆØ·Ù†ÙŠ Ù‡ÙŠ Ø§Ù„Ù…Ù…Ø«Ù„ Ø§Ù„ÙˆØ­ÙŠØ¯ Ù„Ù„Ø´Ø¹Ø¨ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ.",
                ]
            },
        ];

        // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙÙŠ DOM
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        const scoreElement = document.getElementById('score');
        const attemptsElement = document.getElementById('attempts');
        const eventCardElement = document.getElementById('event-card');
        const detailOptionsElement = document.getElementById('detail-options');
        const messageElement = document.getElementById('message');
        const timerTextElement = document.getElementById('timer-text');
        const timerRingElement = document.getElementById('timer-ring');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const questionNumberElement = document.getElementById('question-number');
        const finalScoreElement = document.getElementById('final-score');
        const endMessageElement = document.getElementById('end-message');
        const startGameBtn = document.getElementById('start-game-btn');
        const restartGameBtn = document.getElementById('restart-game-btn');

        // Ù…ØªØºÙŠØ±Ø§Øª Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        let currentScore = 0;
        let currentAttempts = 5; // *** ØªØ­Ø¯ÙŠØ«: 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª
        let questions = []; // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… Ø·Ø±Ø­Ù‡Ø§
        let currentQuestionIndex = 0;
        let timerInterval;
        let timeLeft = 30;
        const totalQuestions = 10;
        let eventDetailMap = new Map(); // Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø¨Ø§Ù„Ø­Ø¯Ø« Ø§Ù„ØµØ­ÙŠØ­
        let questionMap = []; // Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ†Ù‡Ø§

        /**
         * Ø¯Ø§Ù„Ø© Ø®Ù„Ø· Ø§Ù„Ù…ØµÙÙˆÙØ© (Fisher-Yates)
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ù€ 10 Ø£Ø³Ø¦Ù„Ø©
         */
        function setupQuestions() {
            questionMap = [];
            eventDetailMap.clear();

            // ØªØ¬Ù‡ÙŠØ² 8 Ø£Ø³Ø¦Ù„Ø© (ØªÙØµÙŠÙ„ÙŠÙ† Ù„ÙƒÙ„ Ø­Ø¯Ø« Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø±Ø¨Ø¹Ø©)
            GAME_DATA.forEach(eventData => {
                shuffleArray(eventData.details); 
                for(let i = 0; i < 2; i++) {
                    questionMap.push({
                        event: eventData.event,
                        correctDetail: eventData.details[i]
                    });
                    eventDetailMap.set(eventData.details[i], eventData.event);
                }
            });

            // Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ÙŠÙ† Ø¥Ø¶Ø§ÙÙŠÙŠÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠÙŠÙ† Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ 10
            while (questionMap.length < totalQuestions) {
                const randomEvent = GAME_DATA[Math.floor(Math.random() * GAME_DATA.length)];
                const randomDetail = randomEvent.details[Math.floor(Math.random() * randomEvent.details.length)];
                 // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ø§Ù„Ø¶Ø¨Ø·
                 if (!questionMap.some(q => q.event === randomEvent.event && q.correctDetail === randomDetail)) {
                    questionMap.push({
                        event: randomEvent.event,
                        correctDetail: randomDetail
                    });
                    eventDetailMap.set(randomDetail, randomEvent.event);
                 }
            }

            // Ø®Ù„Ø· Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„ØªØ±ØªÙŠØ¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
            shuffleArray(questionMap);
            questionMap = questionMap.slice(0, totalQuestions); // Ø¶Ù…Ø§Ù† 10 Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ù„Ø¶Ø¨Ø·
        }
        
        /**
         * Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
         */
        function startGame() {
            currentScore = 0;
            currentAttempts = 5; // *** ØªØ­Ø¯ÙŠØ«: 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª
            currentQuestionIndex = 0;
            updateScoreDisplay();
            setupQuestions(); 
            
            startScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');

            loadQuestion();
        }
        
        /**
         * ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
         */
        function updateScoreDisplay() {
            scoreElement.textContent = currentScore;
            attemptsElement.textContent = currentAttempts;
        }

        /**
         * Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø²Ù…Ù†ÙŠ
         */
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 30;
            timerTextElement.textContent = timeLeft;
            timerRingElement.style.strokeDashoffset = 0; 
            
            timerInterval = setInterval(() => {
                timeLeft--;
                timerTextElement.textContent = timeLeft;
                
                const dashoffset = (30 - timeLeft) * (283 / 30);
                timerRingElement.style.strokeDashoffset = dashoffset;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeout();
                }
            }, 1000);
        }

        /**
         * Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø²Ù…Ù†ÙŠ
         */
        function handleTimeout() {
            currentAttempts--; // *** ØªØ­Ø¯ÙŠØ«: Ø®Ø³Ø§Ø±Ø© Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙ‚Ø·
            updateScoreDisplay();
            messageElement.textContent = 'âŒ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ø®Ø³Ø±Øª Ù…Ø­Ø§ÙˆÙ„Ø©.';
            
            Array.from(detailOptionsElement.children).forEach(option => {
                option.onclick = null;
                option.classList.add('opacity-50', 'pointer-events-none');
            });
            
            checkGameOver();
        }
        
        /**
         * ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
         */
        function loadQuestion() {
            clearInterval(timerInterval); 
            messageElement.textContent = '';
            nextQuestionBtn.style.display = 'none';
            questionNumberElement.textContent = currentQuestionIndex + 1;
            detailOptionsElement.innerHTML = ''; 
            
            if (currentQuestionIndex >= totalQuestions) {
                endGame(true); 
                return;
            }

            const currentQ = questionMap[currentQuestionIndex];
            
            eventCardElement.textContent = currentQ.event;
            const correctDetail = currentQ.correctDetail;
            let allDetails = [correctDetail];

            const allOtherDetails = GAME_DATA
                .filter(d => d.event !== currentQ.event) 
                .flatMap(d => d.details);

            shuffleArray(allOtherDetails); 

            allDetails.push(...allOtherDetails.slice(0, 2));
            shuffleArray(allDetails); 

            allDetails.forEach(detail => {
                const isCorrect = detail === correctDetail;
                const optionDiv = document.createElement('div');
                optionDiv.className = 'card bg-white p-4 rounded-lg shadow-md text-base text-gray-800 hover:bg-gray-50';
                optionDiv.textContent = detail;
                optionDiv.onclick = () => handleChoice(optionDiv, isCorrect);
                detailOptionsElement.appendChild(optionDiv);
            });
            
            startTimer();
        }

        /**
         * Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø§Ø¹Ø¨
         */
        function handleChoice(chosenElement, isCorrect) {
            clearInterval(timerInterval); 
            
            Array.from(detailOptionsElement.children).forEach(option => {
                option.onclick = null;
            });
            
            if (isCorrect) {
                currentScore++;
                chosenElement.classList.add('correct', 'scale-105');
                messageElement.textContent = 'ğŸ‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +1 Ù†Ù‚Ø·Ø©.';
            } else {
                // *** ØªØ­Ø¯ÙŠØ«: Ø®Ø³Ø§Ø±Ø© Ù†Ù‚Ø·Ø© ÙˆØ®Ø³Ø§Ø±Ø© Ù…Ø­Ø§ÙˆÙ„Ø© ***
                currentScore = Math.max(0, currentScore - 1); // Ù„Ø§ ØªÙ†Ø²Ù„ Ø§Ù„Ù†Ù‚Ø§Ø· ØªØ­Øª Ø§Ù„ØµÙØ±
                currentAttempts--;
                chosenElement.classList.add('incorrect', 'scale-95');
                messageElement.textContent = 'âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø®Ø³Ø±Øª Ù†Ù‚Ø·Ø© ÙˆÙ…Ø­Ø§ÙˆÙ„Ø©.';
                
                // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                const correctOption = Array.from(detailOptionsElement.children).find(option => {
                    return option.textContent === questionMap[currentQuestionIndex].correctDetail;
                });
                if(correctOption) {
                    correctOption.classList.add('correct');
                }
            }
            
            currentQuestionIndex++; // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ ÙÙŠ ÙƒÙ„ØªØ§ Ø§Ù„Ø­Ø§Ù„ØªÙŠÙ†
            updateScoreDisplay();
            checkGameOver();
        }
        
        /**
         * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© (Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø£Ùˆ Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª)
         */
        function checkGameOver() {
            if (currentAttempts <= 0) {
                // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‚Ø¨Ù„ Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
                setTimeout(() => endGame(false), 1500); // Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
            } else if (currentQuestionIndex >= totalQuestions) {
                // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‚Ø¨Ù„ Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
                setTimeout(() => endGame(true), 1500); // Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­
            } else {
                 // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù‚Ø¨Ù„ Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± "Ø§Ù„ØªØ§Ù„ÙŠ"
                setTimeout(() => {
                    nextQuestionBtn.style.display = 'block';
                }, 1500);
            }
        }

        /**
         * Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
         */
        function endGame(finishedAllQuestions) {
            clearInterval(timerInterval);
            gameScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            finalScoreElement.textContent = currentScore;
            
            if (finishedAllQuestions) {
                endMessageElement.textContent = `Ù…Ø¨Ø§Ø±Ùƒ! Ù„Ù‚Ø¯ Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©.`;
                endMessageElement.classList.remove('text-red-600');
                endMessageElement.classList.add('text-green-700');
            } else {
                endMessageElement.textContent = `Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª! Ø­Ø¸ Ø£ÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.`;
                endMessageElement.classList.remove('text-green-700');
                endMessageElement.classList.add('text-red-600');
            }
        }

        // Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        startGameBtn.addEventListener('click', startGame);
        restartGameBtn.addEventListener('click', startGame);
        nextQuestionBtn.addEventListener('click', loadQuestion);

    </script>
</body>
</html>

